{%- liquid
  if product
    assign product_title = product.title
    assign product_url = product.url
    assign product_price = product.price
    assign product_compare_price = product.compare_at_price
    assign product_available = product.available
    assign product_image = product.featured_image
    assign product_vendor = product.vendor
    assign product_description = product.description | strip_html | truncate: 120
  else
    assign product_title = 'MacBook Pro M2'
    assign product_url = '#'
    assign product_price = 2173600
    assign product_compare_price = 4347200
    assign product_available = true
    assign product_image = null
    assign product_vendor = 'Apple'
    assign product_description = 'Apple 2025 MacBook Air (13-inch, Apple M4 chip with 10-core CPU and 8-core GPU, 16GB Unified Memory, 256GB) - Sky Blue'
  endif

  assign has_discount = false
  if product_compare_price > product_price
    assign has_discount = true
    assign discount_percent = product_compare_price | minus: product_price | times: 100 | divided_by: product_compare_price
  endif
-%}

<div class="product-card">
  {%- if has_discount -%}
    <div class="product-card__badge">
      {{ discount_percent }}% off
    </div>
  {%- endif -%}

  <a href="{{ product_url }}" class="product-card__image-wrapper">
    {%- if product_image != blank -%}
      <img
        src="{{ product_image | image_url: width: 400 }}"
        alt="{{ product_title | escape }}"
        width="249"
        height="165"
        loading="lazy"
        class="product-card__image"
      >
    {%- else -%}
      <div class="product-card__placeholder">
        {{ 'product-1' | placeholder_svg_tag: 'product-card__placeholder-svg' }}
      </div>
    {%- endif -%}
  </a>

  <div class="product-card__content">
    <div class="product-card__header">
      <h3 class="product-card__title">
        <a href="{{ product_url }}">{{ product_title }}</a>
      </h3>
      {%- if product_vendor != blank -%}
        <div class="product-card__rating">
          <svg width="14" height="13" viewBox="0 0 14 13" fill="#FFB800">
            <path d="M7 0l1.76 5.41h5.69l-4.6 3.34 1.76 5.41L7 10.82l-4.6 3.34 1.76-5.41-4.6-3.34h5.69L7 0z"/>
          </svg>
          <svg width="14" height="13" viewBox="0 0 14 13" fill="#FFB800">
            <path d="M7 0l1.76 5.41h5.69l-4.6 3.34 1.76 5.41L7 10.82l-4.6 3.34 1.76-5.41-4.6-3.34h5.69L7 0z"/>
          </svg>
          <svg width="14" height="13" viewBox="0 0 14 13" fill="#FFB800">
            <path d="M7 0l1.76 5.41h5.69l-4.6 3.34 1.76 5.41L7 10.82l-4.6 3.34 1.76-5.41-4.6-3.34h5.69L7 0z"/>
          </svg>
          <svg width="14" height="13" viewBox="0 0 14 13" fill="#FFB800">
            <path d="M7 0l1.76 5.41h5.69l-4.6 3.34 1.76 5.41L7 10.82l-4.6 3.34 1.76-5.41-4.6-3.34h5.69L7 0z"/>
          </svg>
          <svg width="14" height="13" viewBox="0 0 14 13" fill="#E0E0E0">
            <path d="M7 0l1.76 5.41h5.69l-4.6 3.34 1.76 5.41L7 10.82l-4.6 3.34 1.76-5.41-4.6-3.34h5.69L7 0z"/>
          </svg>
        </div>
      {%- endif -%}
    </div>

    <p class="product-card__description">
      {{ product_description }}
    </p>

    <div class="product-card__actions">
      <div class="product-card__price-btn">
        <span>â‚¹ {{ product_price | money_without_currency | remove: ',' }}</span>
      </div>
      
      <div class="product-card__buttons">
        <a href="{{ product_url }}" class="product-card__btn product-card__btn--buy">
          Buy Now
        </a>
        <button type="button" class="product-card__btn product-card__btn--cart" data-add-to-cart data-product-id="{{ product.id }}">
          Add to cart
        </button>
      </div>
    </div>
  </div>
</div>

{% stylesheet %}
  .product-card {
    position: relative;
    background-color: var(--color-white);
    border: 0.5px solid var(--color-black);
    border-radius: 3px;
    box-shadow: 4px 4px 0px 0px var(--color-black);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    width: 322px;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  }

  .product-card:hover {
    transform: translate(-2px, -2px);
    box-shadow: 6px 6px 0px 0px var(--color-black);
  }

  .product-card__badge {
    position: absolute;
    top: 0;
    right: 0;
    background-color: #3B68AC;
    color: var(--color-white);
    padding: 5px 8px;
    border-radius: 0 0 0 2px;
    font-family: var(--font-display);
    font-size: 13.66px;
    font-weight: var(--font-weight-medium);
    line-height: 1.2;
    z-index: 2;
    box-shadow: 1px 2px 0px 0.455px var(--color-black);
  }

  .product-card__image-wrapper {
    display: block;
    position: relative;
    padding: 17px;
    padding-bottom: 0;
    height: 165px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--color-white);
  }

  .product-card__image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }

  .product-card__placeholder {
    width: 200px;
    height: 130px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .product-card__placeholder-svg {
    width: 100%;
    height: 100%;
    opacity: 0.3;
  }

  .product-card__content {
    padding: 12px 17px 17px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .product-card__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
  }

  .product-card__title {
    margin: 0;
    font-family: var(--font-body);
    font-size: 17px;
    font-weight: var(--font-weight-bold);
    line-height: 1.2;
  }

  .product-card__title a {
    color: var(--color-black);
    text-decoration: none;
  }

  .product-card__title a:hover {
    color: var(--color-primary);
  }

  .product-card__rating {
    display: flex;
    gap: 2px;
    flex-shrink: 0;
  }

  .product-card__rating svg {
    width: 14px;
    height: 13px;
  }

  .product-card__description {
    font-family: var(--font-body);
    font-size: 8px;
    font-weight: var(--font-weight-medium);
    color: var(--color-black);
    margin: 0;
    line-height: 1.4;
  }

  .product-card__actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 15px;
    margin-top: auto;
  }

  .product-card__price-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 4.5px 9px;
    background-color: var(--color-accent);
    color: var(--color-black);
    font-family: var(--font-display);
    font-size: 11.36px;
    font-weight: var(--font-weight-medium);
    line-height: 1;
    border: 1.14px solid var(--color-black);
    border-radius: 3px;
    box-shadow: 2.27px 2.27px 0px 0px var(--color-black);
  }

  .product-card__buttons {
    display: flex;
    gap: 6px;
  }

  .product-card__btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 4.5px 9px;
    font-family: var(--font-body);
    font-size: 8px;
    font-weight: var(--font-weight-medium);
    line-height: 1;
    border: 1.14px solid var(--color-black);
    border-radius: 3px;
    box-shadow: 2.27px 2.27px 0px 0px var(--color-black);
    cursor: pointer;
    text-decoration: none;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  }

  .product-card__btn:hover {
    transform: translate(-1px, -1px);
    box-shadow: 3px 3px 0px 0px var(--color-black);
  }

  .product-card__btn--buy {
    background-color: var(--color-white);
    color: var(--color-black);
  }

  .product-card__btn--cart {
    background-color: var(--color-accent-blue);
    color: var(--color-black);
  }

  @media screen and (max-width: 768px) {
    .product-card {
      width: 100%;
      max-width: 280px;
    }

    .product-card__image-wrapper {
      height: 140px;
    }

    .product-card__title {
      font-size: 14px;
    }

    .product-card__description {
      font-size: 10px;
    }

    .product-card__btn {
      font-size: 10px;
      padding: 6px 10px;
    }
  }
{% endstylesheet %}
