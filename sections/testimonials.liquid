<div class="testimonials">
  <div class="testimonials__container container">
    <h2 class="testimonials__heading">{{ section.settings.heading }}</h2>
    
    <div class="testimonials__carousel" data-testimonials-carousel>
      <div class="testimonials__track">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when 'testimonial' -%}
              <div class="testimonials__item" {{ block.shopify_attributes }}>
                <div class="testimonials__card">
                  {%- if block.settings.image != blank -%}
                    <div class="testimonials__avatar">
                      <img
                        src="{{ block.settings.image | image_url: width: 80 }}"
                        alt="{{ block.settings.customer_name | escape }}"
                        width="80"
                        height="80"
                        loading="lazy"
                      >
                    </div>
                  {%- endif -%}
                  
                  <div class="testimonials__content">
                    <h3 class="testimonials__name">{{ block.settings.customer_name }}</h3>
                    
                    {%- if block.settings.rating > 0 -%}
                      <div class="testimonials__rating">
                        {%- for i in (1..5) -%}
                          <svg class="testimonials__star{% if i <= block.settings.rating %} testimonials__star--filled{% endif %}" width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="currentColor"/>
                          </svg>
                        {%- endfor -%}
                      </div>
                    {%- endif -%}
                    
                    {%- if block.settings.text != blank -%}
                      <p class="testimonials__text">{{ block.settings.text }}</p>
                    {%- endif -%}
                  </div>
                </div>
              </div>
          {%- endcase -%}
        {%- endfor -%}
      </div>
    </div>
    
    <div class="testimonials__controls">
      <button type="button" class="testimonials__button testimonials__button--prev" data-carousel-prev>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button type="button" class="testimonials__button testimonials__button--next" data-carousel-next>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </div>
</div>

{% stylesheet %}
  .testimonials {
    padding: var(--spacing-2xl) 0;
    background: linear-gradient(180deg, #E0E7FF 0%, #DBEAFE 100%);
  }

  .testimonials__heading {
    text-align: center;
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: var(--spacing-xl);
    color: var(--color-text);
  }

  .testimonials__carousel {
    overflow: hidden;
    margin-bottom: var(--spacing-lg);
  }

  .testimonials__track {
    display: flex;
    gap: var(--spacing-lg);
    transition: transform 0.5s ease;
  }

  .testimonials__item {
    flex: 0 0 calc(33.333% - var(--spacing-lg));
    min-width: 0;
  }

  .testimonials__card {
    background-color: white;
    border-radius: var(--border-radius-lg);
    padding: var(--spacing-lg);
    box-shadow: var(--shadow-md);
    height: 100%;
  }

  .testimonials__avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    overflow: hidden;
    margin-bottom: var(--spacing-sm);
  }

  .testimonials__avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .testimonials__name {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
    color: var(--color-text);
  }

  .testimonials__rating {
    display: flex;
    gap: 0.25rem;
    margin-bottom: var(--spacing-sm);
  }

  .testimonials__star {
    color: #E5E7EB;
  }

  .testimonials__star--filled {
    color: #FBBF24;
  }

  .testimonials__text {
    font-size: 0.9375rem;
    line-height: 1.6;
    color: var(--color-text-light);
    margin: 0;
  }

  .testimonials__controls {
    display: flex;
    justify-content: center;
    gap: var(--spacing-sm);
  }

  .testimonials__button {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: white;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all var(--transition-speed);
  }

  .testimonials__button:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
  }

  @media screen and (max-width: 1024px) {
    .testimonials__item {
      flex: 0 0 calc(50% - var(--spacing-lg));
    }
  }

  @media screen and (max-width: 768px) {
    .testimonials__heading {
      font-size: 2rem;
    }

    .testimonials__item {
      flex: 0 0 100%;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Testimonials",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Testimonials"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Customer Photo"
        },
        {
          "type": "text",
          "id": "customer_name",
          "label": "Customer Name",
          "default": "John Doe"
        },
        {
          "type": "range",
          "id": "rating",
          "label": "Rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Review Text",
          "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials",
      "blocks": [
        {
          "type": "testimonial",
          "settings": {
            "customer_name": "Alice Grace",
            "rating": 5
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "customer_name": "Prateep Sharma",
            "rating": 5
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "customer_name": "Kajol Malkin",
            "rating": 5
          }
        }
      ]
    }
  ]
}
{% endschema %}


