<nav class="main-navigation" role="navigation">
  <div class="main-navigation__container container">
    <ul class="main-navigation__list">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'menu_item' -%}
            <li class="main-navigation__item" {{ block.shopify_attributes }}>
              {%- if block.settings.link != blank -%}
                <a href="{{ block.settings.link }}" class="main-navigation__link">
                  <span>{{ block.settings.label }}</span>
                  {%- if block.settings.show_dropdown -%}
                    <svg class="main-navigation__dropdown-icon" width="13" height="7" viewBox="0 0 13 7" fill="none">
                      <path d="M1 1L6.5 6L12 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  {%- endif -%}
                </a>
              {%- else -%}
                <button type="button" class="main-navigation__link main-navigation__link--button">
                  <span>{{ block.settings.label }}</span>
                  {%- if block.settings.show_dropdown -%}
                    <svg class="main-navigation__dropdown-icon" width="13" height="7" viewBox="0 0 13 7" fill="none">
                      <path d="M1 1L6.5 6L12 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  {%- endif -%}
                </button>
              {%- endif -%}
              
              {%- if block.settings.show_dropdown and block.settings.mega_menu != blank -%}
                <div class="main-navigation__dropdown">
                  <div class="main-navigation__dropdown-content">
                    {{ linklists[block.settings.mega_menu].links | map: 'title' | join: ', ' }}
                  </div>
                </div>
              {%- endif -%}
            </li>
        {%- endcase -%}
      {%- endfor -%}
    </ul>
  </div>
</nav>

{% stylesheet %}
  .main-navigation {
    background-color: var(--color-background);
    border-bottom: 1px solid var(--color-border);
  }

  .main-navigation__container {
    padding: 0 var(--container-padding);
  }

  .main-navigation__list {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-lg);
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .main-navigation__item {
    position: relative;
  }

  .main-navigation__link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: var(--spacing-sm) 0;
    text-decoration: none;
    color: var(--color-text);
    font-size: 0.9375rem;
    background: none;
    border: none;
    cursor: pointer;
    font-family: var(--font-body);
    transition: color var(--transition-speed);
  }

  .main-navigation__link:hover {
    color: var(--color-primary);
  }

  .main-navigation__dropdown-icon {
    width: 13px;
    height: 7px;
    transition: transform var(--transition-speed);
  }

  .main-navigation__item:hover .main-navigation__dropdown-icon {
    transform: rotate(180deg);
  }

  .main-navigation__dropdown {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    background-color: white;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-md);
    box-shadow: var(--shadow-lg);
    padding: var(--spacing-md);
    min-width: 200px;
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--transition-speed), visibility var(--transition-speed);
    z-index: var(--z-dropdown);
  }

  .main-navigation__item:hover .main-navigation__dropdown {
    opacity: 1;
    visibility: visible;
  }

  .main-navigation__dropdown-content {
    font-size: 0.875rem;
    color: var(--color-text);
  }

  @media screen and (max-width: 768px) {
    .main-navigation {
      display: none;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Main Navigation",
  "max_blocks": 10,
  "blocks": [
    {
      "type": "menu_item",
      "name": "Menu Item",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Menu Item"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "checkbox",
          "id": "show_dropdown",
          "label": "Show Dropdown Arrow",
          "default": false
        },
        {
          "type": "link_list",
          "id": "mega_menu",
          "label": "Mega Menu"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Main Navigation",
      "blocks": [
        {
          "type": "menu_item",
          "settings": {
            "label": "Smart Speaker",
            "show_dropdown": true
          }
        },
        {
          "type": "menu_item",
          "settings": {
            "label": "Ear Buds",
            "show_dropdown": true
          }
        },
        {
          "type": "menu_item",
          "settings": {
            "label": "Tablet",
            "show_dropdown": true
          }
        },
        {
          "type": "menu_item",
          "settings": {
            "label": "Laptop",
            "show_dropdown": true
          }
        },
        {
          "type": "menu_item",
          "settings": {
            "label": "Phone",
            "show_dropdown": true
          }
        },
        {
          "type": "menu_item",
          "settings": {
            "label": "Earbuds",
            "show_dropdown": true
          }
        }
      ]
    }
  ]
}
{% endschema %}


