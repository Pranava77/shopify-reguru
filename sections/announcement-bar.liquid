{%- liquid
  assign bg_color = section.settings.background_color | default: '#1E1A5C'
  assign text_color = section.settings.text_color | default: '#28D98E'
  assign bg_image = section.settings.background_image
  assign bg_overlay_color = section.settings.background_overlay_color | default: '#000000'
  assign bg_overlay_opacity = section.settings.background_overlay_opacity | default: 0 | divided_by: 100.0
  assign bg_position = section.settings.background_image_position | default: 'center'
  assign bg_size = section.settings.background_image_size | default: 'cover'
-%}

<div 
  class="announcement-bar{% if bg_image != blank %} announcement-bar--has-bg-image{% endif %}" 
  style="
    background-color: {{ bg_color }};
    {%- if bg_image != blank -%}
      --bg-image: url('{{ bg_image | image_url: width: 1920 }}');
      --bg-position: {{ bg_position }};
      --bg-size: {{ bg_size }};
    {%- endif -%}
    --bg-overlay-color: {{ bg_overlay_color }};
    --bg-overlay-opacity: {{ bg_overlay_opacity }};
  "
>
  {%- if bg_image != blank and bg_overlay_opacity > 0 -%}
    <div class="announcement-bar__overlay"></div>
  {%- endif -%}
  <div class="announcement-bar__content">
    <p class="announcement-bar__text" style="color: {{ text_color }};">
      {{ section.settings.text | default: 'Welcome To ReGuru' }}
    </p>
  </div>
</div>

{% stylesheet %}
.announcement-bar {
  position: relative;
  width: 100%;
  height: 43px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.announcement-bar--has-bg-image {
  background-image: var(--bg-image);
  background-position: var(--bg-position);
  background-size: var(--bg-size);
  background-repeat: no-repeat;
}

.announcement-bar__overlay {
  position: absolute;
  inset: 0;
  background-color: var(--bg-overlay-color);
  opacity: var(--bg-overlay-opacity);
  z-index: 1;
  pointer-events: none;
}

.announcement-bar__content {
  position: relative;
  z-index: 2;
  width: 100%;
  max-width: var(--container-max);
  padding: 0 var(--container-padding);
  text-align: center;
}

.announcement-bar__text {
  font-family: var(--font-body);
  font-weight: 600;
  font-size: 16px;
  line-height: 14px;
  margin: 0;
}
{% endstylesheet %}

{% schema %}
{
  "name": "Announcement Bar",
  "tag": "section",
  "class": "announcement-bar-section",
  "settings": [
    {
      "type": "text",
      "id": "text",
      "label": "Announcement Text",
      "default": "Welcome To ReGuru"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#1E1A5C"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#28D98E"
    },
    {
      "type": "header",
      "content": "Background"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "color",
      "id": "background_overlay_color",
      "label": "Overlay Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "background_overlay_opacity",
      "label": "Overlay Opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 0
    },
    {
      "type": "select",
      "id": "background_image_position",
      "label": "Image Position",
      "options": [
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        },
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "background_image_size",
      "label": "Image Size",
      "options": [
        {
          "value": "cover",
          "label": "Cover"
        },
        {
          "value": "contain",
          "label": "Contain"
        },
        {
          "value": "auto",
          "label": "Auto"
        }
      ],
      "default": "cover"
    }
  ],
  "presets": [
    {
      "name": "Announcement Bar"
    }
  ]
}
{% endschema %}
